#N canvas 0 0 1904 976 10;
#X floatatom 30 340 5 0 0 0 - - -, f 5;
#X floatatom 30 76 5 0 0 0 - - -, f 5;
#X obj 30 100 s starting_note;
#X obj 30 46 loadbang;
#X text 30 240 Melody generation subpatch;
#X text 30 20 PARAMETERS;
#X obj 560 200 metro, f 9;
#X floatatom 560 80 5 0 0 0 - - -, f 5;
#X obj 560 160 tgl 15 0 empty empty empty 17 7 0 10 #fcfcfc #000000
#000000 1 1;
#X obj 530 860 dac~;
#X obj 30 270 bng 15 250 50 0 empty empty empty 17 7 0 10 #fcfcfc #000000
#000000;
#N canvas 2068 193 1089 503 generate_note_from_scale 1;
#X obj 40 80 inlet;
#X obj 40 390 outlet;
#X obj 40 240 tabread pitches;
#X floatatom 40 280 5 0 0 0 - - -, f 5;
#X floatatom 40 208 5 0 0 0 - - -, f 5;
#X obj 40 160 random 8;
#X text 170 110 this arg should be the table size \, I believe;
#X obj 200 220 r starting_note;
#X obj 40 320 + 0, f 27;
#X floatatom 200 260 5 0 0 0 - - -, f 5;
#X floatatom 40 350 5 0 0 0 - - -, f 5;
#X text 40 30 This patch randomly selects a note from an 8-note scale
defined in the "pitches" table when banged.;
#X connect 0 0 5 0;
#X connect 2 0 3 0;
#X connect 3 0 8 0;
#X connect 4 0 2 0;
#X connect 5 0 4 0;
#X connect 7 0 9 0;
#X connect 8 0 10 0;
#X connect 9 0 8 1;
#X connect 10 0 1 0;
#X restore 30 300 pd generate_note_from_scale;
#N canvas 549 245 1089 528 generate_note_from_scale 0;
#X obj 40 80 inlet;
#X obj 40 390 outlet;
#X obj 40 240 tabread pitches;
#X floatatom 40 280 5 0 0 0 - - -, f 5;
#X floatatom 40 208 5 0 0 0 - - -, f 5;
#X obj 40 160 random 8;
#X text 170 110 this arg should be the table size \, I believe;
#X obj 200 220 r starting_note;
#X obj 40 320 + 0, f 27;
#X floatatom 200 260 5 0 0 0 - - -, f 5;
#X floatatom 40 350 5 0 0 0 - - -, f 5;
#X text 40 30 This patch randomly selects a note from an 8-note scale
defined in the "pitches" table when banged.;
#X connect 0 0 5 0;
#X connect 2 0 3 0;
#X connect 3 0 8 0;
#X connect 4 0 2 0;
#X connect 5 0 4 0;
#X connect 7 0 9 0;
#X connect 8 0 10 0;
#X connect 9 0 8 1;
#X connect 10 0 1 0;
#X restore 30 300 pd generate_note_from_scale;
#N canvas 488 388 1089 578 generate_note_from_scale 0;
#X obj 40 80 inlet;
#X obj 40 390 outlet;
#X obj 40 240 tabread pitches;
#X floatatom 40 280 5 0 0 0 - - -, f 5;
#X floatatom 40 208 5 0 0 0 - - -, f 5;
#X obj 40 160 random 8;
#X obj 200 220 r starting_note;
#X obj 40 320 + 0, f 27;
#X floatatom 200 260 5 0 0 0 - - -, f 5;
#X floatatom 40 350 5 0 0 0 - - -, f 5;
#X text 40 30 This patch randomly selects a note from an 8-note scale
defined in the "pitches" table when banged.;
#X connect 0 0 5 0;
#X connect 2 0 3 0;
#X connect 3 0 7 0;
#X connect 4 0 2 0;
#X connect 5 0 4 0;
#X connect 6 0 8 0;
#X connect 7 0 9 0;
#X connect 8 0 7 1;
#X connect 9 0 1 0;
#X restore 530 490 pd generate_note_from_scale;
#X floatatom 560 260 5 0 0 0 - - -, f 5;
#X obj 560 230 counter;
#X obj 560 290 mod 8;
#X floatatom 560 350 5 0 0 0 - - -, f 5;
#X floatatom 530 520 5 0 0 0 - - -, f 5;
#X obj 560 380 sel 1 2 3 4 5 6 7 8;
#X obj 560 320 + 1;
#X obj 530 460 gate;
#X obj 530 420 tgl 15 0 empty empty empty 17 7 0 10 #fcfcfc #000000
#000000 1 1;
#X obj 1030 70 table pitches;
#X obj 1030 110 loadbang;
#X text 1210 150 harmonic minor;
#N canvas 533 188 796 559 simple_synth 0;
#X obj 200 130 mtof;
#X obj 200 400 *~;
#X obj 200 193 phasor~;
#X obj 280 320 line~;
#X obj 280 159 bng 15 250 50 0 empty empty empty 17 7 0 10 #fcfcfc
#000000 #000000;
#X floatatom 361 199 5 0 0 0 - - -, f 5;
#X obj 280 230 pack 0.25 50;
#X obj 200 241 *~ 1;
#X obj 200 320 bp~ 440 5;
#X floatatom 231 291 5 0 0 0 - - -, f 5;
#X text 302 157 TODO: fix amplitude envelope;
#X obj 200 80 inlet;
#X obj 200 440 outlet~;
#X connect 0 0 2 0;
#X connect 1 0 12 0;
#X connect 2 0 7 0;
#X connect 3 0 1 1;
#X connect 4 0 6 0;
#X connect 5 0 6 1;
#X connect 6 0 3 0;
#X connect 7 0 8 0;
#X connect 8 0 1 0;
#X connect 9 0 8 1;
#X connect 11 0 0 0;
#X connect 11 0 4 0;
#X restore 530 800 pd simple_synth;
#N canvas 488 388 1089 578 generate_note_from_scale 0;
#X obj 40 80 inlet;
#X obj 40 390 outlet;
#X obj 40 240 tabread pitches;
#X floatatom 40 280 5 0 0 0 - - -, f 5;
#X floatatom 40 208 5 0 0 0 - - -, f 5;
#X obj 40 160 random 8;
#X obj 200 220 r starting_note;
#X obj 40 320 + 0, f 27;
#X floatatom 200 260 5 0 0 0 - - -, f 5;
#X floatatom 40 350 5 0 0 0 - - -, f 5;
#X text 40 30 This patch randomly selects a note from an 8-note scale
defined in the "pitches" table when banged.;
#X connect 0 0 5 0;
#X connect 2 0 3 0;
#X connect 3 0 7 0;
#X connect 4 0 2 0;
#X connect 5 0 4 0;
#X connect 6 0 8 0;
#X connect 7 0 9 0;
#X connect 8 0 7 1;
#X connect 9 0 1 0;
#X restore 570 520 pd generate_note_from_scale;
#X floatatom 570 550 5 0 0 0 - - -, f 5;
#X obj 570 460 gate;
#X obj 570 420 tgl 15 0 empty empty empty 17 7 0 10 #fcfcfc #000000
#000000 1 1;
#N canvas 488 388 1089 578 generate_note_from_scale 0;
#X obj 40 80 inlet;
#X obj 40 390 outlet;
#X obj 40 240 tabread pitches;
#X floatatom 40 280 5 0 0 0 - - -, f 5;
#X floatatom 40 208 5 0 0 0 - - -, f 5;
#X obj 40 160 random 8;
#X obj 200 220 r starting_note;
#X obj 40 320 + 0, f 27;
#X floatatom 200 260 5 0 0 0 - - -, f 5;
#X floatatom 40 350 5 0 0 0 - - -, f 5;
#X text 40 30 This patch randomly selects a note from an 8-note scale
defined in the "pitches" table when banged.;
#X connect 0 0 5 0;
#X connect 2 0 3 0;
#X connect 3 0 7 0;
#X connect 4 0 2 0;
#X connect 5 0 4 0;
#X connect 6 0 8 0;
#X connect 7 0 9 0;
#X connect 8 0 7 1;
#X connect 9 0 1 0;
#X restore 610 550 pd generate_note_from_scale;
#X floatatom 610 580 5 0 0 0 - - -, f 5;
#X obj 610 460 gate;
#X obj 610 420 tgl 15 0 empty empty empty 17 7 0 10 #fcfcfc #000000
#000000 0 1;
#N canvas 488 388 1089 578 generate_note_from_scale 0;
#X obj 40 80 inlet;
#X obj 40 390 outlet;
#X obj 40 240 tabread pitches;
#X floatatom 40 280 5 0 0 0 - - -, f 5;
#X floatatom 40 208 5 0 0 0 - - -, f 5;
#X obj 40 160 random 8;
#X obj 200 220 r starting_note;
#X obj 40 320 + 0, f 27;
#X floatatom 200 260 5 0 0 0 - - -, f 5;
#X floatatom 40 350 5 0 0 0 - - -, f 5;
#X text 40 30 This patch randomly selects a note from an 8-note scale
defined in the "pitches" table when banged.;
#X connect 0 0 5 0;
#X connect 2 0 3 0;
#X connect 3 0 7 0;
#X connect 4 0 2 0;
#X connect 5 0 4 0;
#X connect 6 0 8 0;
#X connect 7 0 9 0;
#X connect 8 0 7 1;
#X connect 9 0 1 0;
#X restore 650 580 pd generate_note_from_scale;
#X floatatom 650 610 5 0 0 0 - - -, f 5;
#X obj 650 460 gate;
#X obj 650 420 tgl 15 0 empty empty empty 17 7 0 10 #fcfcfc #000000
#000000 1 1;
#N canvas 488 388 1089 578 generate_note_from_scale 0;
#X obj 40 80 inlet;
#X obj 40 390 outlet;
#X obj 40 240 tabread pitches;
#X floatatom 40 280 5 0 0 0 - - -, f 5;
#X floatatom 40 208 5 0 0 0 - - -, f 5;
#X obj 40 160 random 8;
#X obj 200 220 r starting_note;
#X obj 40 320 + 0, f 27;
#X floatatom 200 260 5 0 0 0 - - -, f 5;
#X floatatom 40 350 5 0 0 0 - - -, f 5;
#X text 40 30 This patch randomly selects a note from an 8-note scale
defined in the "pitches" table when banged.;
#X connect 0 0 5 0;
#X connect 2 0 3 0;
#X connect 3 0 7 0;
#X connect 4 0 2 0;
#X connect 5 0 4 0;
#X connect 6 0 8 0;
#X connect 7 0 9 0;
#X connect 8 0 7 1;
#X connect 9 0 1 0;
#X restore 690 610 pd generate_note_from_scale;
#X floatatom 690 640 5 0 0 0 - - -, f 5;
#X obj 690 460 gate;
#X obj 690 420 tgl 15 0 empty empty empty 17 7 0 10 #fcfcfc #000000
#000000 1 1;
#X obj 90 40 bng 15 250 50 0 empty empty empty 17 7 0 10 #fcfcfc #000000
#000000;
#N canvas 488 388 1089 578 generate_note_from_scale 0;
#X obj 40 80 inlet;
#X obj 40 390 outlet;
#X obj 40 240 tabread pitches;
#X floatatom 40 280 5 0 0 0 - - -, f 5;
#X floatatom 40 208 5 0 0 0 - - -, f 5;
#X obj 40 160 random 8;
#X obj 200 220 r starting_note;
#X obj 40 320 + 0, f 27;
#X floatatom 200 260 5 0 0 0 - - -, f 5;
#X floatatom 40 350 5 0 0 0 - - -, f 5;
#X text 40 30 This patch randomly selects a note from an 8-note scale
defined in the "pitches" table when banged.;
#X connect 0 0 5 0;
#X connect 2 0 3 0;
#X connect 3 0 7 0;
#X connect 4 0 2 0;
#X connect 5 0 4 0;
#X connect 6 0 8 0;
#X connect 7 0 9 0;
#X connect 8 0 7 1;
#X connect 9 0 1 0;
#X restore 730 640 pd generate_note_from_scale;
#X floatatom 730 670 5 0 0 0 - - -, f 5;
#X obj 730 460 gate;
#X obj 730 420 tgl 15 0 empty empty empty 17 7 0 10 #fcfcfc #000000
#000000 1 1;
#N canvas 488 388 1089 578 generate_note_from_scale 0;
#X obj 40 80 inlet;
#X obj 40 390 outlet;
#X obj 40 240 tabread pitches;
#X floatatom 40 280 5 0 0 0 - - -, f 5;
#X floatatom 40 208 5 0 0 0 - - -, f 5;
#X obj 40 160 random 8;
#X obj 200 220 r starting_note;
#X obj 40 320 + 0, f 27;
#X floatatom 200 260 5 0 0 0 - - -, f 5;
#X floatatom 40 350 5 0 0 0 - - -, f 5;
#X text 40 30 This patch randomly selects a note from an 8-note scale
defined in the "pitches" table when banged.;
#X connect 0 0 5 0;
#X connect 2 0 3 0;
#X connect 3 0 7 0;
#X connect 4 0 2 0;
#X connect 5 0 4 0;
#X connect 6 0 8 0;
#X connect 7 0 9 0;
#X connect 8 0 7 1;
#X connect 9 0 1 0;
#X restore 770 670 pd generate_note_from_scale;
#X floatatom 770 700 5 0 0 0 - - -, f 5;
#X obj 770 460 gate;
#X obj 770 420 tgl 15 0 empty empty empty 17 7 0 10 #fcfcfc #000000
#000000 1 1;
#N canvas 488 388 1089 578 generate_note_from_scale 0;
#X obj 40 80 inlet;
#X obj 40 390 outlet;
#X obj 40 240 tabread pitches;
#X floatatom 40 280 5 0 0 0 - - -, f 5;
#X floatatom 40 208 5 0 0 0 - - -, f 5;
#X obj 40 160 random 8;
#X obj 200 220 r starting_note;
#X obj 40 320 + 0, f 27;
#X floatatom 200 260 5 0 0 0 - - -, f 5;
#X floatatom 40 350 5 0 0 0 - - -, f 5;
#X text 40 30 This patch randomly selects a note from an 8-note scale
defined in the "pitches" table when banged.;
#X connect 0 0 5 0;
#X connect 2 0 3 0;
#X connect 3 0 7 0;
#X connect 4 0 2 0;
#X connect 5 0 4 0;
#X connect 6 0 8 0;
#X connect 7 0 9 0;
#X connect 8 0 7 1;
#X connect 9 0 1 0;
#X restore 810 700 pd generate_note_from_scale;
#X floatatom 810 730 5 0 0 0 - - -, f 5;
#X obj 810 460 gate;
#X obj 810 420 tgl 15 0 empty empty empty 17 7 0 10 #fcfcfc #000000
#000000 1 1;
#X text 1030 20 Scale data - scales are represented in half-step intervals
\, and must be 8 notes long., f 36;
#X msg 1030 140 \; pitches 0 0 2 3 5 7 8 11 12;
#X text 1210 150 harmonic minor;
#X text 1030 20 Scale data - scales are represented in half-step intervals
\, and must be 8 notes long., f 36;
#X msg 1030 180 \; pitches 0 0 2 4 5 7 9 11 12;
#X text 1210 190 major;
#X floatatom 130 76 5 0 0 0 - - -, f 5;
#X obj 130 46 loadbang;
#X obj 190 40 bng 15 250 50 0 empty empty empty 17 7 0 10 #fcfcfc #000000
#000000;
#X obj 130 100 s starting_metro;
#X obj 560 50 r starting_metro;
#X obj 240 46 loadbang;
#X obj 240 100 s metro_multiplier;
#X obj 300 40 bng 15 250 50 0 empty empty empty 17 7 0 10 #fcfcfc #000000
#000000;
#X floatatom 240 80 5 0 0 0 - - -, f 5;
#X obj 610 130 * 1;
#X obj 630 80 r metro_multiplier;
#X text 1360 20 Plans for the patch: Essentially \, different moods/emotions
can be conveyed by changing the values of various parameters. The key
parameters in this simple patch that can be altered to shift the feel
of the sequence are the scale and the tempo. For example \, doubling
tempo and changing scale to major creates a much "happier" melody than
halving tempo and changing scale to minor.;
#X text 1360 130 So \, the next thing to be implemented should be some
way to "sad-ify" or "happy-ify" or in the future \, "pensive-ify" or
"anxious-ify" the patch. I want to have some selector or menu where
you can select "Happy" and throughout the patch \, parameters such
as scale would shift to major and the metro multiplier would shift
to *2. Or select "Sad" and the scale shifts to minor and multiplier
shifts to *0.5 or *1.;
#X text 1360 240 Another thing for consideration is rhythmic alteration
\, but I'm having trouble conceptualizing an easy way to implement
pleasing rhythmic randomness.;
#X connect 1 0 2 0;
#X connect 3 0 1 0;
#X connect 6 0 15 0;
#X connect 7 0 71 0;
#X connect 8 0 6 0;
#X connect 10 0 11 0;
#X connect 11 0 0 0;
#X connect 13 0 18 0;
#X connect 14 0 16 0;
#X connect 15 0 14 0;
#X connect 16 0 20 0;
#X connect 17 0 19 0;
#X connect 18 0 26 0;
#X connect 19 0 21 1;
#X connect 19 1 29 1;
#X connect 19 2 33 1;
#X connect 19 3 37 1;
#X connect 19 4 41 1;
#X connect 19 5 46 1;
#X connect 19 6 50 1;
#X connect 19 7 54 1;
#X connect 20 0 17 0;
#X connect 21 0 13 0;
#X connect 22 0 21 0;
#X connect 24 0 57 0;
#X connect 26 0 9 0;
#X connect 26 0 9 1;
#X connect 27 0 28 0;
#X connect 28 0 26 0;
#X connect 29 0 27 0;
#X connect 30 0 29 0;
#X connect 31 0 32 0;
#X connect 32 0 26 0;
#X connect 33 0 31 0;
#X connect 34 0 33 0;
#X connect 35 0 36 0;
#X connect 36 0 26 0;
#X connect 37 0 35 0;
#X connect 38 0 37 0;
#X connect 39 0 40 0;
#X connect 40 0 26 0;
#X connect 41 0 39 0;
#X connect 42 0 41 0;
#X connect 43 0 1 0;
#X connect 44 0 45 0;
#X connect 45 0 26 0;
#X connect 46 0 44 0;
#X connect 47 0 46 0;
#X connect 48 0 49 0;
#X connect 49 0 26 0;
#X connect 50 0 48 0;
#X connect 51 0 50 0;
#X connect 52 0 53 0;
#X connect 53 0 26 0;
#X connect 54 0 52 0;
#X connect 55 0 54 0;
#X connect 62 0 65 0;
#X connect 63 0 62 0;
#X connect 64 0 62 0;
#X connect 66 0 7 0;
#X connect 67 0 70 0;
#X connect 69 0 70 0;
#X connect 70 0 68 0;
#X connect 71 0 6 1;
#X connect 72 0 71 1;
